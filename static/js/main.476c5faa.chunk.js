(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{16:function(e,t,c){},17:function(e,t,c){"use strict";c.r(t);var a=c(7),s=c.n(a),n=c(1),i=(c(13),c(14),c(2));function l(e){var t,c="https://mate-academy.github.io/react_dynamic-list-of-todos/api"+e+".json";return(t=300,new Promise((function(e){setTimeout(e,t)}))).then((function(){return fetch(c)})).then((function(e){return e.json()}))}var o;!function(e){e.ALL="",e.ACTIVE="active",e.COMPLETED="completed"}(o||(o={}));var r=c(8),d=c(0),j=Object(n.createContext)({todos:[],isTodoLoading:!1,toggleModal:function(){},isOpenModal:!1,searchField:"",filterField:o.ALL,onUpdateSearch:function(){},onUpdateFilter:function(){},currentTodo:null,updateCurrentTodo:function(){}}),u=function(e){var t=e.children,c=Object(n.useState)([]),a=Object(i.a)(c,2),s=a[0],u=a[1],b=Object(n.useState)(null),h=Object(i.a)(b,2),O=h[0],x=h[1],m=Object(n.useState)(!1),f=Object(i.a)(m,2),p=f[0],v=f[1],N=Object(n.useState)(!1),g=Object(i.a)(N,2),y=g[0],C=g[1],L=Object(n.useState)(""),T=Object(i.a)(L,2),S=T[0],F=T[1],k=Object(n.useState)(o.ALL),U=Object(i.a)(k,2),M=U[0],w=U[1];Object(n.useEffect)((function(){v(!0),l("/todos").then((function(e){return u(e)})).finally((function(){return v(!1)}))}),[]);var E=function(){C((function(e){return!e}))},A=function(e){F(e)},P=function(e){w(e)},I=function(e){x(e)},_=function(e,t){var c=t.searchField,a=t.filterField,s=Object(r.a)(e);if(c){var n=c.toLowerCase().trim();s=s.filter((function(e){return e.title.toLowerCase().includes(n)}))}return a&&(s=s.filter((function(e){switch(a){case o.ACTIVE:return!e.completed;case o.COMPLETED:return e.completed;default:return e}}))),s}(s,{searchField:S,filterField:M}),B=Object(n.useMemo)((function(){return{todos:_,isTodoLoading:p,toggleModal:E,isOpenModal:y,searchField:S,filterField:M,onUpdateSearch:A,onUpdateFilter:P,currentTodo:O,updateCurrentTodo:I}}),[s,p,y,S,M]);return Object(d.jsx)(j.Provider,{value:B,children:t})},b=function(){var e=Object(n.useContext)(j),t=e.searchField,c=e.filterField,a=e.onUpdateFilter,s=e.onUpdateSearch;return Object(d.jsxs)("form",{className:"field has-addons",children:[Object(d.jsx)("p",{className:"control",children:Object(d.jsx)("span",{className:"select",children:Object(d.jsxs)("select",{value:c,"data-cy":"statusSelect",onChange:function(e){var t=e.target.value;a(t)},children:[Object(d.jsx)("option",{value:"all",children:"All"}),Object(d.jsx)("option",{value:"active",children:"Active"}),Object(d.jsx)("option",{value:"completed",children:"Completed"})]})})}),Object(d.jsxs)("p",{className:"control is-expanded has-icons-left has-icons-right",children:[Object(d.jsx)("input",{"data-cy":"searchInput",type:"text",className:"input",placeholder:"Search...",value:t,onChange:function(e){var t=e.target.value;s(t)}}),Object(d.jsx)("span",{className:"icon is-left",children:Object(d.jsx)("i",{className:"fas fa-magnifying-glass"})}),Object(d.jsx)("span",{className:"icon is-right",style:{pointerEvents:"all"},children:t&&Object(d.jsx)("button",{"data-cy":"clearSearchButton",type:"button",className:"delete",onClick:function(){s("")}})})]})]})},h=c(6),O=c.n(h),x=Object(n.createContext)({user:null,onUpdateUser:function(){},userLoading:!1}),m=function(e){var t=e.children,c=Object(n.useState)(null),a=Object(i.a)(c,2),s=a[0],o=a[1],r=Object(n.useState)(!1),j=Object(i.a)(r,2),u=j[0],b=j[1],h={user:s,onUpdateUser:function(e){var t;b(!0),(t=e,l("/users/".concat(t))).then((function(e){return o(e)})).finally((function(){return b(!1)}))},userLoading:u};return Object(d.jsx)(x.Provider,{value:h,children:t})},f=function(e){var t=e.todos,c=Object(n.useContext)(j),a=c.toggleModal,s=c.updateCurrentTodo,i=c.isOpenModal,l=Object(n.useContext)(x).onUpdateUser;return Object(d.jsxs)("table",{className:"table is-narrow is-fullwidth",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"#"}),Object(d.jsx)("th",{children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("th",{children:"Title"}),Object(d.jsx)("th",{children:" "})]})}),Object(d.jsx)("tbody",{children:t.map((function(e){return Object(d.jsxs)("tr",{"data-cy":"todo",className:"",children:[Object(d.jsx)("td",{className:"is-vcentered",children:e.id}),Object(d.jsx)("td",{className:"is-vcentered",children:e.completed&&Object(d.jsx)("span",{className:"icon","data-cy":"iconCompleted",children:Object(d.jsx)("i",{className:"fas fa-check"})})}),Object(d.jsx)("td",{className:"is-vcentered is-expanded",children:Object(d.jsx)("p",{className:O()({"has-text-danger":!e.completed,"has-text-success":e.completed}),children:e.title})}),Object(d.jsx)("td",{className:"has-text-right is-vcentered",children:Object(d.jsx)("button",{onClick:function(){return function(e,t){l(e),a(),s(t)}(e.userId,e)},"data-cy":"selectButton",className:"button",type:"button",children:Object(d.jsx)("span",{className:"icon",children:Object(d.jsx)("i",{className:O()({"far fa-eye":!i,"far fa-eye-slash":i})})})})})]},e.id)}))})]})},p=(c(16),function(){return Object(d.jsx)("div",{className:"Loader","data-cy":"loader",children:Object(d.jsx)("div",{className:"Loader__content"})})}),v=function(){var e=Object(n.useContext)(x),t=e.userLoading,c=e.user,a=Object(n.useContext)(j),s=a.toggleModal,i=a.currentTodo;return Object(d.jsxs)("div",{className:"modal is-active","data-cy":"modal",children:[Object(d.jsx)("div",{className:"modal-background"}),t?Object(d.jsx)(p,{}):Object(d.jsxs)("div",{className:"modal-card",children:[Object(d.jsxs)("header",{className:"modal-card-head",children:[Object(d.jsx)("div",{className:"modal-card-title has-text-weight-medium","data-cy":"modal-header",children:"Todo #".concat(null===i||void 0===i?void 0:i.id)}),Object(d.jsx)("button",{onClick:s,type:"button",className:"delete","data-cy":"modal-close"})]}),Object(d.jsxs)("div",{className:"modal-card-body",children:[Object(d.jsx)("p",{className:"block","data-cy":"modal-title",children:null===i||void 0===i?void 0:i.title}),Object(d.jsxs)("p",{className:"block","data-cy":"modal-user",children:[null!==i&&void 0!==i&&i.completed?Object(d.jsx)("strong",{className:"has-text-success",children:"Done"}):Object(d.jsx)("strong",{className:"has-text-danger",children:"Planned"})," by ",Object(d.jsx)("a",{href:"mailto:Sincere@april.biz",children:null===c||void 0===c?void 0:c.name})]})]})]})]})},N=function(){var e=Object(n.useContext)(j),t=e.todos,c=e.isTodoLoading,a=e.isOpenModal;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"section",children:Object(d.jsx)("div",{className:"container",children:Object(d.jsxs)("div",{className:"box",children:[Object(d.jsx)("h1",{className:"title",children:"Todos:"}),Object(d.jsx)("div",{className:"block",children:Object(d.jsx)(b,{})}),Object(d.jsx)("div",{className:"block",children:c?Object(d.jsx)(p,{}):Object(d.jsx)(f,{todos:t})})]})})}),a&&Object(d.jsx)(v,{})]})},g=function(){return Object(d.jsx)(m,{children:Object(d.jsx)(u,{children:Object(d.jsx)(N,{})})})};s.a.render(Object(d.jsx)(g,{}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.476c5faa.chunk.js.map